# from samples

WX_CONFIG = wx-config
PLATFORM = $(shell cat $(TOPDIR)/wxc/platform)

CXX = $(shell $(WX_CONFIG) --cxx)
DC = gdc

CXXFLAGS = -O2 -g
DCFLAGS += -fversion=__$(PLATFORM)__ -O2 -g

WXVERSION = `$(WX_CONFIG) --version`
WXLIBS = `$(WX_CONFIG) --libs`

LDFLAGS = -lstdc++

.cpp.o: 
	$(CXX) -c $(CXXFLAGS) `$(WX_CONFIG) --cxxflags` $<

%.o:%.d
	$(DC) -c $(DCFLAGS) -I$(TOPDIR) $<


all: $(TARGET)


$(TARGET) : $(OBJECTS)
	$(DC) -o $@ $(OBJECTS) -L$(TOPDIR) -lwxd -lwxc $(WXLIBS) $(LDFLAGS)

clean:
	-rm *.o
	-rm $(TARGET)
